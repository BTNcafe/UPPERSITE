global.PACKER=function(){"use strict";var n=require("fs"),E=require("path"),R=__dirname,S=process.argv[2],e="",r="",t="",O=function(n){console.log("PACKER: "+n)},i=function(E){var S=E.path,e=E.name;return n.statSync(R+"/"+S).isDirectory()===!0&&"."!==e[0]&&"node_modules"!==e&&"not_load"!==e&&"deprecated"!==e&&"_"!==e[0]},c=function(E,R){n.statSync(E).isDirectory()===!0?(n.mkdirSync(R),n.readdirSync(E).forEach(function(n){"."!==n[0]&&c(E+"/"+n,R+"/"+n)})):n.createReadStream(E).pipe(n.createWriteStream(R))},_=function(E,R){n.writeFileSync(E,R)},o=function(E,S){var e,r;if(n.existsSync(E)===!0)for(e=[],n.readdirSync(E).forEach(function(r){var t=E+"/"+r;i({path:t,name:r})===!0?e.push(t):n.statSync(R+"/"+t).isDirectory()!==!0&&S(t)}),r=0;r<e.length;r+=1)o(e[r],S)},a=function(E){n.readdirSync(S).forEach(function(n){"."!==n[0]&&"BROWSER"!==n&&"COMMON"!==n&&"SERVER"!==n&&E(S+"/"+n)})},s=function(S){var r=R+"/"+S,t=E.extname(S),O=n.readFileSync(r);".js"===t?e+=O+"\n":".__UPPERSITE_COMPILED"===t&&(e+=O+"\n")},A=function(S){var e=R+"/"+S,t=E.extname(S),O=n.readFileSync(e);".js"===t?r+=O+"\n":".__UPPERSITE_COMPILED"===t&&(r+=O+"\n")},C=function(S){var e=R+"/"+S,r=E.extname(S),O=n.readFileSync(e);".js"===r?t+=O+"\n":".__UPPERSITE_COMPILED"===r&&(t+=O+"\n")},P=function(){var n=require(R+"/UPPERSITE/SERVER/node_modules/uglify-js");e=n.parse(e).print_to_string(),r=n.parse(r).print_to_string(),t=n.parse(t).print_to_string()};O("PACKING BOX ["+S+"]..."),O("CREATING FOLDER..."),n.mkdirSync("__PACK/"+S),O("CREATED FOLDER!"),O("LOADING BOX..."),O("LOADING FOR BROWSER..."),o(S+"/BROWSER",s),O("LOADED FOR BROWSER!"),O("LOADING FOR COMMON..."),o(S+"/COMMON",A),O("LOADED FOR COMMON!"),O("LOADING FOR SERVER..."),o(S+"/SERVER",C),O("LOADED FOR SERVER!"),O("LOADED BOX!"),O("MINIFYING..."),P(),O("MINIFYED!"),O("SAVING BOX..."),a(function(n){c(n,"__PACK/"+S+"/"+n.substring(S.length+1))}),""!==e&&(O("SAVING BROWSER SCRIPT..."),n.mkdirSync("__PACK/"+S+"/BROWSER"),_("__PACK/"+S+"/BROWSER/BROWSER.js",e),O("SAVED BROWSER SCRIPT!")),""!==r&&(O("SAVING COMMON SCRIPT..."),n.mkdirSync("__PACK/"+S+"/COMMON"),_("__PACK/"+S+"/COMMON/COMMON.js",r),O("SAVED COMMON SCRIPT!")),""!==t&&(O("SAVING SERVER SCRIPT..."),n.mkdirSync("__PACK/"+S+"/SERVER"),_("__PACK/"+S+"/SERVER/SERVER.js",t),O("SAVED SERVER SCRIPT!")),n.existsSync(S+"/SERVER/node_modules")===!0&&(O("SAVING NODE MODULES..."),n.existsSync("__PACK/"+S+"/SERVER")===!1&&n.mkdirSync("__PACK/"+S+"/SERVER"),c(S+"/SERVER/node_modules","__PACK/"+S+"/SERVER/node_modules"),O("SAVED NODE MODULES!")),O("SAVED BOX!"),O("PACKED BOX ["+S+"]!")},PACKER();